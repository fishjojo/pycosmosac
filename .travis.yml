language: python
group: travis_latest
os: linux
dist: bionic

git:
  depth: 10

python:
 - "3.5"
 - "3.6"
 - "3.7"
 - "3.8"
 
cache:
  apt: true
  pip: true

before_install:
 - pip install -r requirements.txt
 - pip install codecov pytest-cov

install:
 - cd $TRAVIS_BUILD_DIR
 - pip install .

script:
 - cd $TRAVIS_BUILD_DIR
 - export OMP_NUM_THREADS=1
 - pytest --durations=0 --cov-config=.coveragerc --cov=pycosmosac
   $TRAVIS_BUILD_DIR/pycosmosac

after_success:
  - codecov
